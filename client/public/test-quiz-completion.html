<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹éªŒå®Œæˆæµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .step {
            margin: 15px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f9f9f9;
        }
        .step h3 {
            margin-top: 0;
            color: #333;
        }
        .code {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 3px;
            font-family: monospace;
            margin: 10px 0;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª æµ‹éªŒå®Œæˆå’Œç»éªŒå€¼æ›´æ–°æµ‹è¯•</h1>
        
        <div class="warning">
            <strong>âš ï¸ é‡è¦æç¤ºï¼š</strong>è¯·ç¡®ä¿æ‚¨å·²ç»ç™»å½•å¹¶ä¸”æœ‰æœ‰æ•ˆçš„tokenï¼
        </div>

        <div class="step">
            <h3>æ­¥éª¤1: æ£€æŸ¥ç™»å½•çŠ¶æ€</h3>
            <p>åœ¨æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œä»¥ä¸‹ä»£ç ï¼š</p>
            <div class="code">
const token = localStorage.getItem('token');
console.log('å½“å‰token:', token ? 'å·²ç™»å½•' : 'æœªç™»å½•');
if (token) {
    try {
        const payload = JSON.parse(atob(token.split('.')[1]));
        console.log('ç”¨æˆ·ID:', payload.id);
        console.log('ç”¨æˆ·å:', payload.username);
        console.log('tokenè¿‡æœŸæ—¶é—´:', new Date(payload.exp * 1000));
        console.log('æ˜¯å¦è¿‡æœŸ:', Date.now() > payload.exp * 1000);
    } catch (e) {
        console.error('tokenè§£æå¤±è´¥:', e);
    }
}
            </div>
        </div>

        <div class="step">
            <h3>æ­¥éª¤2: ç›‘å¬ç»éªŒå€¼æ›´æ–°äº‹ä»¶</h3>
            <p>åœ¨æ§åˆ¶å°è¿è¡Œä»¥ä¸‹ä»£ç æ¥ç›‘å¬ç»éªŒå€¼æ›´æ–°ï¼š</p>
            <div class="code">
// ç›‘å¬ç»éªŒå€¼æ›´æ–°äº‹ä»¶
window.addEventListener('experienceUpdated', function(event) {
    console.log('ğŸ‰ ç»éªŒå€¼æ›´æ–°äº‹ä»¶è§¦å‘:', event.detail);
    console.log('è·å¾—ç»éªŒå€¼:', event.detail.experienceGained);
    console.log('æ–°ç»éªŒå€¼:', event.detail.newExperience);
    console.log('æ–°ç­‰çº§:', event.detail.newLevel);
    console.log('æ˜¯å¦å‡çº§:', event.detail.leveledUp);
});

console.log('âœ… ç»éªŒå€¼æ›´æ–°äº‹ä»¶ç›‘å¬å™¨å·²è®¾ç½®');
            </div>
        </div>

        <div class="step">
            <h3>æ­¥éª¤3: ç›‘å¬ç½‘ç»œè¯·æ±‚</h3>
            <p>æ‰“å¼€å¼€å‘è€…å·¥å…·çš„Networké¢æ¿ï¼Œè¿‡æ»¤"addExperience"æ¥ç›‘å¬APIè°ƒç”¨ã€‚</p>
        </div>

        <div class="step">
            <h3>æ­¥éª¤4: å®Œæˆæµ‹éªŒ</h3>
            <p>ç°åœ¨å»å®Œæˆç¬¬ä¸€ç« çš„æµ‹éªŒï¼Œè§‚å¯Ÿï¼š</p>
            <ul>
                <li>æ§åˆ¶å°æ˜¯å¦æœ‰"ğŸ¯ å¼€å§‹æ·»åŠ ç»éªŒå€¼å’Œæ£€æŸ¥æˆå°±..."çš„æ—¥å¿—</li>
                <li>æ§åˆ¶å°æ˜¯å¦æœ‰"ğŸ“ˆ è®¡ç®—å¾—åˆ°ç»éªŒå€¼: XX"çš„æ—¥å¿—</li>
                <li>Networké¢æ¿æ˜¯å¦æœ‰/api/level/addExperienceçš„è¯·æ±‚</li>
                <li>æ˜¯å¦è§¦å‘äº†experienceUpdatedäº‹ä»¶</li>
                <li>æ˜¯å¦æ˜¾ç¤ºäº†"è·å¾— XX ç»éªŒå€¼ï¼"çš„æˆåŠŸæç¤º</li>
            </ul>
        </div>

        <div class="step">
            <h3>æ­¥éª¤5: æ£€æŸ¥ä¸ªäººèµ„æ–™é¡µé¢</h3>
            <p>å®Œæˆæµ‹éªŒåï¼Œè®¿é—®ä¸ªäººèµ„æ–™é¡µé¢ï¼Œæ£€æŸ¥ç»éªŒå€¼æ˜¯å¦æ›´æ–°ã€‚</p>
        </div>

        <div class="success">
            <strong>ğŸ” è°ƒè¯•æç¤ºï¼š</strong>
            <ul>
                <li>å¦‚æœæ²¡æœ‰çœ‹åˆ°"ğŸ¯ å¼€å§‹æ·»åŠ ç»éªŒå€¼"æ—¥å¿—ï¼Œè¯´æ˜completeQuizæ–¹æ³•æ²¡æœ‰è¢«è°ƒç”¨</li>
                <li>å¦‚æœçœ‹åˆ°"ğŸš« æœªç™»å½•ï¼Œè·³è¿‡ç»éªŒå€¼æ·»åŠ "ï¼Œè¯´æ˜tokenæœ‰é—®é¢˜</li>
                <li>å¦‚æœçœ‹åˆ°APIè°ƒç”¨ä½†æ²¡æœ‰æˆåŠŸï¼Œæ£€æŸ¥åç«¯æ—¥å¿—</li>
                <li>å¦‚æœAPIæˆåŠŸä½†ä¸ªäººèµ„æ–™é¡µé¢æ²¡æ›´æ–°ï¼Œæ£€æŸ¥äº‹ä»¶ç›‘å¬</li>
            </ul>
        </div>

        <div class="step">
            <h3>å¿«é€Ÿé“¾æ¥</h3>
            <p>
                <a href="http://localhost:5174/quiz/1" target="_blank">ğŸ“ ç¬¬ä¸€ç« æµ‹éªŒ</a> |
                <a href="http://localhost:5174/profile" target="_blank">ğŸ‘¤ ä¸ªäººèµ„æ–™é¡µé¢</a>
            </p>
        </div>
    </div>

    <script>
        console.log('ğŸ§ª æµ‹éªŒå®Œæˆæµ‹è¯•é¡µé¢å·²åŠ è½½');
        console.log('è¯·æŒ‰ç…§é¡µé¢ä¸Šçš„æ­¥éª¤è¿›è¡Œæµ‹è¯•');
    </script>
</body>
</html>