# 动态神经网络结构配置功能

## 功能概述

为神经网络可视化组件添加了动态调整每层神经元数量的功能，用户可以自定义网络结构，增强了交互性和学习体验。

## 主要功能

### 1. 动态网络结构配置
- **自定义神经元数量**: 用户可以调整每层神经元的数量（1-10个）
- **智能限制**: 超过10个神经元时自动弹出警告提示
- **固定层保护**: 输入层和输出层数量固定，不可修改
- **实时预览**: 配置过程中实时显示网络结构预览

### 2. 网络结构配置界面
- **直观的配置面板**: 每层都有独立的配置项
- **图标化显示**: 不同类型的层使用不同图标
- **参数统计**: 实时显示总神经元数和预估参数量
- **结构预览**: 可视化展示当前网络结构

### 3. 验证和提示系统
- **数量限制**: 每层神经元数量限制在1-10个之间
- **超限警告**: 超过10个时弹出警告消息
- **训练保护**: 训练进行中不允许修改结构
- **操作确认**: 重置默认配置时需要确认

## 技术实现

### 新增响应式数据
```javascript
// 网络结构配置
const showNetworkStructureDialog = ref(false)
const layerConfigs = ref([...]) // 层配置数组

// 计算属性
const totalNeurons = computed(() => {...})
const estimatedParameters = computed(() => {...})
```

### 核心方法
```javascript
// 验证神经元数量
const validateNodeCount = (layer, newValue) => {
  if (newValue > 10) {
    ElMessage.warning('每层神经元数量不能超过10个！')
    layer.nodeCount = 10
  }
}

// 应用网络结构
const applyNetworkStructure = () => {
  initializeNetwork()
  ElMessage.success('网络结构已更新！')
}
```

### 动态网络初始化
```javascript
const initializeNetwork = () => {
  // 根据layerConfigs动态生成网络结构
  networkLayers.value = layerConfigs.value.map((config, index) => {
    // 动态计算位置和节点
    return {
      id: config.id,
      name: config.name,
      nodes: generateNodes(config.nodeCount),
      labelX: calculatePosition(index),
      labelY: 30
    }
  })
}
```

## 用户界面

### 配置对话框结构
```
网络配置对话框
├── 配置说明
├── 层配置列表
│   ├── 输入层 (固定1个)
│   ├── 卷积层1 (可调1-10个)
│   ├── 池化层1 (可调1-10个)
│   ├── 卷积层2 (可调1-10个)
│   ├── 池化层2 (可调1-10个)
│   ├── 全连接层 (可调1-10个)
│   └── 输出层 (固定2个)
├── 结构预览
│   ├── 可视化网络图
│   └── 统计信息
└── 操作按钮
    ├── 恢复默认
    ├── 取消
    └── 应用配置
```

### 层配置项
每个层配置项包含：
- **图标**: 表示层类型的图标
- **名称和描述**: 层的名称和功能说明
- **数量控制**: 输入框调整神经元数量
- **状态指示**: 固定层显示为禁用状态

## 验证规则

### 神经元数量限制
1. **最小值**: 每层至少1个神经元
2. **最大值**: 每层最多10个神经元
3. **固定层**: 输入层(1个)和输出层(2个)不可修改
4. **实时验证**: 输入时立即验证并提示

### 警告提示
- **超过10个**: "每层神经元数量不能超过10个！当前设置：X个"
- **少于1个**: "每层至少需要1个神经元！"
- **训练中修改**: "请先停止当前训练再修改网络结构"

## 使用流程

### 配置网络结构
1. 点击"自定义网络结构"按钮
2. 在对话框中调整各层神经元数量
3. 观察实时预览和统计信息
4. 点击"应用配置"保存更改

### 验证和反馈
1. 输入超过10个神经元时自动弹出警告
2. 自动将数值调整到有效范围内
3. 显示成功消息和更新后的网络信息

## 视觉设计

### 配置界面
- **卡片布局**: 每层使用独立的卡片展示
- **图标系统**: 不同层类型使用对应图标
- **颜色编码**: 固定层使用不同颜色标识
- **悬停效果**: 鼠标悬停时高亮显示

### 预览区域
- **网络图**: 简化的网络结构可视化
- **节点表示**: 小圆点表示神经元
- **连接线**: 显示层间连接关系
- **统计面板**: 显示总体统计信息

## 响应式设计

### 移动端适配
- **对话框宽度**: 在小屏幕上自动调整
- **布局调整**: 配置项在移动端垂直排列
- **触摸优化**: 输入控件适配触摸操作

### 交互优化
- **键盘支持**: 支持键盘导航和输入
- **焦点管理**: 合理的焦点顺序
- **无障碍**: 支持屏幕阅读器

## 性能优化

### 计算优化
- **计算属性**: 使用Vue的计算属性缓存结果
- **按需更新**: 只在配置变化时重新计算
- **防抖处理**: 输入时使用防抖避免频繁计算

### 渲染优化
- **虚拟滚动**: 大量节点时使用虚拟滚动
- **懒加载**: 预览图按需渲染
- **内存管理**: 及时清理不需要的DOM元素

## 扩展性

### 未来改进方向
1. **更多层类型**: 支持LSTM、Transformer等层
2. **高级配置**: 支持激活函数、正则化等参数
3. **模板系统**: 预设常用的网络结构模板
4. **导入导出**: 支持保存和加载网络配置
5. **性能分析**: 显示不同配置的性能预测

这个动态网络结构配置功能大大增强了神经网络可视化的交互性，让用户能够深入理解网络结构对性能的影响，提供了更加丰富的学习体验。
